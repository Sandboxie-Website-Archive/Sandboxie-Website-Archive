<!DOCTYPE html>
<html dir="ltr" lang="en-gb">

<!-- Mirrored from forums.sandboxie.com/phpBB3/viewtopic.php?f=11&t=23420&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 28 Mar 2020 06:58:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>Sandboxie Support &bull; Service not implemented for Firefox</title>

<link href="styles/sbie_prosilver/theme/print.css" rel="stylesheet">
</head>
<body id="phpbb">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>Sandboxie Support</h1>
		<p>Support Forum for Sandboxie<br /><a href="index.html">https://forums.sandboxie.com/phpBB3/</a></p>

		<h2>Service not implemented for Firefox</h2>
		<p><a href="viewtopicff85ff85.html?f=11&amp;t=23420">https://forums.sandboxie.com/phpBB3/viewtopic.php?f=11&amp;t=23420</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Thu Sep 22, 2016 11:53 pm</strong></div>
				<div class="author">by <strong>Sandboxie User</strong></div>
				<div class="content">Hi, according to this <a href="../indexa186.html?KnownConflicts" class="postlink">page</a>, it says:<br>

<blockquote class="uncited"><div>Kaspersky Products (2015, 2016, 2017)<br>
<br>
Home Page: <a href="http://www.kaspersky.com/" class="postlink">http://www.kaspersky.com</a><br>
<br>
Problem: "Service not implemented" error when running Sandboxie and / or Sandboxie will crash with KS 2015/16/17 installed (Win 10, 8 &amp; 8.1)<br>
<br>
Solution: For Windows 7, you must add Sandboxie Folder to Kaspersky's 'Threats and Exclusions' section for KIS 2015/2016 in Windows 7.<br>
<br>
For Windows 8/8.1 &amp; Win 10 -KS 2015 and 2016/2017 is not compatible with Sandboxie. Kaspersky must NOT be installed, otherwise Sandboxie will not work.<br>
<br>
IT'S BEST TO NOT HAVE ANY KASPERSKY PRODUCTS INSTALLED. DISABLING WILL NOT WORK. We've instructed KIS what they need to change in their code, at this time, they have not. Thus, their code disrupts Sandboxie. </div></blockquote>

And I have done that yet the problem still persist, so it doesn't work for Firefox? Check this <div class="inline-attachment">
			
		
				<dl class="file">
			<dt class="attach-image"><img src="download/filef611f611.png?id=900" class="postimage" alt="Untitled.png" onclick="viewableArea(this);" /></dt>
			<dd><em>Exclusion screenie</em></dd>			<dd>Untitled.png (26.37 KiB) Viewed 1238 times</dd>
		</dl>
		
		
		
			</div> and this<div class="inline-attachment">
			
		
				<dl class="file">
			<dt class="attach-image"><img src="download/filee77be77b.png?id=901" class="postimage" alt="Capture.PNG" onclick="viewableArea(this);" /></dt>
			<dd><em>Service not implemented</em></dd>			<dd>Capture.PNG (36.26 KiB) Viewed 1238 times</dd>
		</dl>
		
		
		
			</div> attachment for screenshot.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Fri Sep 23, 2016 5:26 pm</strong></div>
				<div class="author">by <strong>bo.elam</strong></div>
				<div class="content">Kaspersky is not compatible with Sandboxie. You should uninstall it. <br>
<br>
Bo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Wed Oct 26, 2016 4:35 pm</strong></div>
				<div class="author">by <strong>Sandboxie User</strong></div>
				<div class="content"><blockquote><div><cite>bo.elam wrote:</cite>Kaspersky is not compatible with Sandboxie. You should uninstall it. <br>
<br>
Bo</div></blockquote>
Sorry for late reply, got busy and forgot about this.  <img class="smilies" src="images/smilies/icon_mrgreen.gif" width="15" height="15" alt=":mrgreen:" title="Mr. Green">  <img class="smilies" src="images/smilies/icon_neutral.gif" width="15" height="15" alt=":|" title="Neutral"> <br>
<br>
So you're telling me I should give up my 30 years worth of licensing(Because that's how much I like Kaspersky as it's guarded me well over the past few years. It's split among computers in total of course - otherwise 30 years for a single computer does seem pretty silly and expensive) for Kaspersky Internet Security (KIS) and use what?<br>
<br>
I tested this with previous versions of Sandboxie, and I found that version 3.76 seems to work perfectly fine(both Chrome and Firefox - with this new version neither Chrome or Firefox will open if you have KIS installed and running), however later versions don't...it seems you've done something that made it incompatible somehow..... Obviously the latest version should supposedly be more stable and bug free which is why I wish to run the latest version of Sandboxie over 3.76. <img class="smilies" src="images/smilies/icon_rolleyes.gif" width="15" height="15" alt=":roll:" title="Rolling Eyes"></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Wed Oct 26, 2016 5:23 pm</strong></div>
				<div class="author">by <strong>bo.elam</strong></div>
				<div class="content"><blockquote><div><cite>Sandboxie User wrote:</cite>..it seems you've done something that made it incompatible somehow....</div></blockquote>
As I understand it, ts old code leftovers in Kaspersky what interferes with Sandboxie. Thats why there is conflict and the result being that you cant use SBIE and KIS at the same time.<br>
<br>
Bo</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Wed Oct 26, 2016 5:29 pm</strong></div>
				<div class="author">by <strong>Syrinx</strong></div>
				<div class="content"><a href="https://forum.kaspersky.com/index.php?showtopic=328928&amp;view=findpost&amp;p=2483066" class="postlink">https://forum.kaspersky.com/index.php?s ... &amp;p=2483066</a>
<blockquote class="uncited"><div>Issue with Sandboxie will be fixed in the future</div></blockquote>

<a href="https://forum.kaspersky.com/index.php?showtopic=328928&amp;view=findpost&amp;p=2491553" class="postlink">https://forum.kaspersky.com/index.php?s ... &amp;p=2491553</a>
<blockquote class="uncited"><div>There is no release date right here &amp; now.....other than it is on the list of known issues to be fixed.</div></blockquote>

<a href="https://forum.kaspersky.com/index.php?showtopic=328928&amp;view=findpost&amp;p=2540215" class="postlink">https://forum.kaspersky.com/index.php?s ... &amp;p=2540215</a><br>
SBIE support:
<blockquote class="uncited"><div>
Why KIS hooks at the level SBIE would for that process is unknown to our Devs and a bit troublesome for an A/V Product. Few, if any do that.
</div></blockquote>

I understand where you are coming from and even some of the posts I didn't quote from the thread mirror my belief that prevention is better than containment and I've went on rants here about how the corporate Invincea products also seem to share this thought but the reality is just this:<br>
<br>
Kaspersky changed something in their code that interferes with Sandboxie so unless Kaspersky is able to work around it and still keep the same level of protection (which seems to be implied from the responses quoted above) but just haven't gotten around to it... and if Sandboxie requires access to those same areas and can't work around it then it's a sort of stand off until one or the other changes something. Regardless of who is at fault, a choice by the user will be required as they simply do not play well together at this time.<br>
<br>
Unless you're on XP or Vista, 3.76 shouldn't be used (or even on those if at all possible), especially on x64 systems.<br>
<a href="viewtopic3e183e18.php?f=11&amp;t=22790#p120187" class="postlink">http://forums.sandboxie.com/phpBB3/view ... 90#p120187</a>
<blockquote class="uncited"><div>It will stop working after certain updates. Version 5.05 of SBIE was broken after patch Tuesday updates back in Oct 2015 that rendered SBIE unusable in OS's from Win 7 through Win 10.</div></blockquote></div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Fri Oct 28, 2016 7:29 pm</strong></div>
				<div class="author">by <strong>Sandboxie User</strong></div>
				<div class="content"><blockquote><div><cite>bo.elam wrote:</cite><blockquote><div><cite>Sandboxie User wrote:</cite>..it seems you've done something that made it incompatible somehow....</div></blockquote>
As I understand it, ts old code leftovers in Kaspersky what interferes with Sandboxie. Thats why there is conflict and the result being that you cant use SBIE and KIS at the same time.<br>
<br>
Bo</div></blockquote>
ts old coode?<br>

<blockquote><div><cite>Syrinx wrote:</cite><a href="https://forum.kaspersky.com/index.php?showtopic=328928&amp;view=findpost&amp;p=2483066" class="postlink">https://forum.kaspersky.com/index.php?s ... &amp;p=2483066</a>
<blockquote class="uncited"><div>Issue with Sandboxie will be fixed in the future</div></blockquote></div></blockquote>Ok, that's nice to know.....<br>

<blockquote><div><cite>Syrinx wrote:</cite><a href="https://forum.kaspersky.com/index.php?showtopic=328928&amp;view=findpost&amp;p=2491553" class="postlink">https://forum.kaspersky.com/index.php?s ... &amp;p=2491553</a>
<blockquote class="uncited"><div>There is no release date right here &amp; now.....other than it is on the list of known issues to be fixed.</div></blockquote></div></blockquote>Ok, at least they know it's a known issue and will be fixed, however it looks like they aren't even interested in getting it *done* asap...so I guess expect it to never be fixed...if ever?<br>

<blockquote><div><cite>Syrinx wrote:</cite><a href="https://forum.kaspersky.com/index.php?showtopic=328928&amp;view=findpost&amp;p=2540215" class="postlink">https://forum.kaspersky.com/index.php?s ... &amp;p=2540215</a><br>
SBIE support:
<blockquote class="uncited"><div>
Why KIS hooks at the level SBIE would for that process is unknown to our Devs and a bit troublesome for an A/V Product. Few, if any do that.
</div></blockquote></div></blockquote>Isn't that why KIS is among one of the best AV products to own on your computer...?<br>

<blockquote><div><cite>Syrinx wrote:</cite>I understand where you are coming from and even some of the posts I didn't quote from the thread mirror my belief that prevention is better than containment and I've went on rants here about how the corporate Invincea products also seem to share this thought</div></blockquote>In general, yes prevention is better than containment in my opinion, however if prevention fails, at least you have a second layer that is containment to confine them. Also depending on the situation, containment would be better, for example if you're just testing something you suspect could be malware but would like to still see what it does - so analysis of malware. But the reason why I run Sandboxie is for a two protection system, prevention being the first that gets hit by malware and if that fails, at least I have containment....and if both fail...well then I'm big (censored). hahaha<br>

<blockquote><div><cite>Syrinx wrote:</cite> but the reality is just this:<br>
<br>
Kaspersky changed something in their code that interferes with Sandboxie so unless Kaspersky is able to work around it and still keep the same level of protection (which seems to be implied from the responses quoted above) but just haven't gotten around to it... and if Sandboxie requires access to those same areas and can't work around it then it's a sort of stand off until one or the other changes something. Regardless of who is at fault, a choice by the user will be required as they simply do not play well together at this time.</div></blockquote>If that was the case, then wouldn't version 3.76 of Sandboxie not work with the latest version of KIS?<br>
<br>
Ok, so I tried other browsers, and it looks like Opera works with the latest version of Sandboxie AND KIS running. So how come Opera works but not Chrome or Firefox? Maybe we need to pull the devs from Chrome and Firefox into this mess too?<br>
<br>
Agh, frustrating that I can't use my favorite web browser with Sandboxie as it would seem KIS is to blame...... <img class="smilies" src="images/smilies/icon_evil.gif" width="15" height="15" alt=":evil:" title="Evil or Very Mad"> <br>

<blockquote><div><cite>Syrinx wrote:</cite>Unless you're on XP or Vista, 3.76 shouldn't be used (or even on those if at all possible), especially on x64 systems.<br>
<a href="viewtopic3e183e18.php?f=11&amp;t=22790#p120187" class="postlink">http://forums.sandboxie.com/phpBB3/view ... 90#p120187</a>
<blockquote class="uncited"><div>It will stop working after certain updates. Version 5.05 of SBIE was broken after patch Tuesday updates back in Oct 2015 that rendered SBIE unusable in OS's from Win 7 through Win 10.</div></blockquote></div></blockquote>
64-bit Windows XP doesn't even work with Sandboxie as I've discovered already and I don't have any computers running Vista. <br>
<br>
Pretty lame, owning both KIS and Sandboxie and I have to choose between the two if I want to run Firefox....... <img class="smilies" src="images/smilies/icon_rolleyes.gif" width="15" height="15" alt=":roll:" title="Rolling Eyes">  <img class="smilies" src="images/smilies/icon_cry.gif" width="15" height="15" alt=":cry:" title="Crying or Very sad">  <img class="smilies" src="images/smilies/icon_sad.gif" width="15" height="15" alt=":(" title="Sad"> *sigh*</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Fri Oct 28, 2016 10:48 pm</strong></div>
				<div class="author">by <strong>Syrinx</strong></div>
				<div class="content"><blockquote class="uncited"><div>If that was the case, then wouldn't version 3.76 of Sandboxie not work with the latest version of KIS?</div></blockquote>
Not exactly, no. Sbie 4.x was a huge redesign. 3.x and below used kernel hooks (major reason it didn't work with x64) and a specific deny approach. With 4.x that got turned around to use ANONYMOUS LOGON [think default deny] and making certain things which it is normally blocked from accessing 'allowed' via the service and some internal rules. That's what I get from it anyway, that may not be accurate...Anyway, I played with it a little tonight for the first time:<br>
<br>
I haven't tested this thoroughly and I'm sure you lose some, if not most, of the extra protections kaspersky might offer for browsers but here's a potential workaround:<br>
Only tested on a Windows XP VM with SBIE 5.14 &amp; a trial of Kaspersky Total Security 17.0.0.611 so far...<br>
<br>
In sandboxie and the box you want to use with firefox (I suggest having a separate one)<br>
Sandbox Settings &gt; Resource Access &gt; File Access &gt; Blocked Access &gt; Edit/Add
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>*klsihk*.dll</code></pre></div>

This allowed me to launch firefox sandboxed without all the service errors or crashes. Even if it works for you I can't say how much doing this will amputate Kasperskys other protections but if you <em>really</em> want to use both of them together it might be worth considering as a possible workaround? Assuming it even works for you like it did me of course....</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Sat Oct 29, 2016 10:49 am</strong></div>
				<div class="author">by <strong>Syrinx</strong></div>
				<div class="content">Did a couple more tests on Windows 7 x64 / Windows 10 x64 with SBIE 5.14, Kaspersky and Firefox.<br>
Blocking that dll seemed to do the trick in both of them as well but my tests were not extensive.<br>
<br>
I'm guessing that the problem is somehow related to its attempts at hooking KiUserCallbackDispatcher? Beyond that guess though I haven't a clue what's actually going on.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Wed Nov 02, 2016 12:23 am</strong></div>
				<div class="author">by <strong>Syrinx</strong></div>
				<div class="content">After testing it myself (see above) and figuring out what was causing this issue I felt the need to update/correct an area where I had posted before.
<blockquote class="uncited"><div>and if Sandboxie requires access to those same areas and can't work around it then it's a sort of stand off until one or the other changes something.</div></blockquote>
Now that I (believe I) understand what's going on this statement is incorrect. [That is of course if I actually found the issue at hand]<br>
Before I had assumed it was some kernel level struggle but that doesn't seem to be the case from what I have seen.<br>
<br>
It doesn't have to do with SBIE being unable to access something (or do its job) but instead it is Kaspersky attempting to do something via this dll [inside the box/program] which Sandboxie is unwilling to let it do. Sure, Invincea could likely add a routine to allow it to pass through but then malware could also use this avenue in an escape attempt. /cough<br>
<br>
As I don't understand the Windows APIs enough to say one way or the other (heck, maybe I'm completely wrong!) I wouldn't feel correct saying that Sandboxie is in the right here but I do wonder why Kaspersky would attempt a userland hook for an API that is meant to run usermode code from a kernel process. /me just got a headache from trying to sound like I know what I'm talking about, <span style="text-decoration: underline">I DON'T</span>!<br>
[This implies to me that such a kernel process already exists and expects to handle it but like I said, I'm not a Windows pro (or any type of dev) so, doh!] Surely it would make more sense to control this via a driver or service to start with? Anyway, I'm just talking out my butt here so please feel free to ignore my <strong>likely incorrect</strong> drunken ramblings on this one...<br>
<br>
/me is ready fer skool! :D</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Service not implemented for Firefox</h3>
				<div class="date">Posted: <strong>Tue Dec 27, 2016 9:56 pm</strong></div>
				<div class="author">by <strong>Sandboxie User</strong></div>
				<div class="content">That's right, I had a thread going on on this topic that I must have forgotten about, sorry!<br>

<blockquote><div><cite>Syrinx wrote:</cite><blockquote class="uncited"><div>If that was the case, then wouldn't version 3.76 of Sandboxie not work with the latest version of KIS?</div></blockquote>
Not exactly, no. Sbie 4.x was a huge redesign. 3.x and below used kernel hooks (major reason it didn't work with x64) and a specific deny approach. With 4.x that got turned around to use ANONYMOUS LOGON [think default deny] and making certain things which it is normally blocked from accessing 'allowed' via the service and some internal rules. That's what I get from it anyway, that may not be accurate...</div></blockquote>I see......<br>

<blockquote><div><cite>Syrinx wrote:</cite>Anyway, I played with it a little tonight for the first time:<br>
<br>
I haven't tested this thoroughly and I'm sure you lose some, if not most, of the extra protections kaspersky might offer for browsers but here's a potential workaround:<br>
Only tested on a Windows XP VM with SBIE 5.14 &amp; a trial of Kaspersky Total Security 17.0.0.611 so far...<br>
<br>
In sandboxie and the box you want to use with firefox (I suggest having a separate one)<br>
Sandbox Settings &gt; Resource Access &gt; File Access &gt; Blocked Access &gt; Edit/Add
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>*klsihk*.dll</code></pre></div>

This allowed me to launch firefox sandboxed without all the service errors or crashes. Even if it works for you I can't say how much doing this will amputate Kasperskys other protections but if you <em>really</em> want to use both of them together it might be worth considering as a possible workaround? Assuming it even works for you like it did me of course....</div></blockquote> Holy (censored); it works! Hmmmm, how do you know this cuts out some of Kaspersky's protection? Without know what protections is cut out, I have no idea if I'm walking into an abyss - thus right into my doom, that's in a pitch black room or if I'm walking into a door that opens to all things I ever wanted(also in the same pitch blackness)!<br>
<br>
Wait a second.....there's been no record of *anything* ever escaping Sandboxie right...? So this should be a good enough general fix for anyone who uses firefox and Kaspersky product? Though I guess it would be nice if malware was suddenly discover when browsing on random sites, and if Kaspersky can't block it(thus preventive measures - it has blocked a few *malicious* links I've randomly come across on dodgy sites whilst sandboxing), at least Sandboxie will *hopefully* contain it.....but what if Sandboxie(first wall that malware has to break through sine Kaspersky's probably disabled? in Sandboxie) can't contain it is what I'm worried about? Sure don't visit random dodgy sites, but then what's the point of me having a license for Sandboxie if the purpose *was* to visit dodgy site so that any malware picked along the way is contained, which is what Sandboxie intentions(well overall in general it's intention is to contain everything, but I'm using it so that in the case of me receiving malware, it's at least contained and not screwing up my computer....haha) are?!<br>

<blockquote><div><cite>Syrinx wrote:</cite><blockquote><div><cite>Syrinx wrote:</cite>Did a couple more tests on Windows 7 x64 / Windows 10 x64 with SBIE 5.14, Kaspersky and Firefox.<br>
Blocking that dll seemed to do the trick in both of them as well but my tests were not extensive.<br>
<br>
I'm guessing that the problem is somehow related to its attempts at hooking KiUserCallbackDispatcher? Beyond that guess though I haven't a clue what's actually going on.</div></blockquote>
<blockquote><div><cite>Syrinx wrote:</cite>After testing it myself (see above) and figuring out what was causing this issue I felt the need to update/correct an area where I had posted before.
<blockquote class="uncited"><div>and if Sandboxie requires access to those same areas and can't work around it then it's a sort of stand off until one or the other changes something.</div></blockquote>
Now that I (believe I) understand what's going on this statement is incorrect. [That is of course if I actually found the issue at hand]<br>
Before I had assumed it was some kernel level struggle but that doesn't seem to be the case from what I have seen.<br>
<br>
It doesn't have to do with SBIE being unable to access something (or do its job) but instead it is Kaspersky attempting to do something via this dll [inside the box/program] which Sandboxie is unwilling to let it do. Sure, Invincea could likely add a routine to allow it to pass through but then malware could also use this avenue in an escape attempt. /cough<br>
<br>
As I don't understand the Windows APIs enough to say one way or the other (heck, maybe I'm completely wrong!) I wouldn't feel correct saying that Sandboxie is in the right here but I do wonder why Kaspersky would attempt a userland hook for an API that is meant to run usermode code from a kernel process. /me just got a headache from trying to sound like I know what I'm talking about, <span style="text-decoration: underline">I DON'T</span>!<br>
[This implies to me that such a kernel process already exists and expects to handle it but like I said, I'm not a Windows pro (or any type of dev) so, doh!] Surely it would make more sense to control this via a driver or service to start with? Anyway, I'm just talking out my butt here so please feel free to ignore my <strong>likely incorrect</strong> drunken ramblings on this one...<br>
<br>
/me is ready fer skool! <img class="smilies" src="images/smilies/icon_biggrin.gif" width="15" height="15" alt=":D" title="Very Happy"></div></blockquote></div></blockquote>err, what is Kaspersky trying to do inside the box? How could malware use this as an escape route if they've keyed it in with Kaspersky's signature? Unles the malware writers somehow now have access to and is using Kaspersky's digital signature - there's no way they can use it as an escape route....well you would assume, with such a software as this that's touted to contain *anything* and *everything* without fail, they would at least use some sort of verifier(that's not a word?) to verify the authenticity of Kaspersky to a malware pretending to be it and escaping through that hole....</div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="America/New York">UTC-04:00</span><br />Page <strong>1</strong> of <strong>1</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Limited<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>

<!-- Mirrored from forums.sandboxie.com/phpBB3/viewtopic.php?f=11&t=23420&view=print by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 28 Mar 2020 06:58:54 GMT -->
</html>
